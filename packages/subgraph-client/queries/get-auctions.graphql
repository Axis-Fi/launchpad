fragment AtomicCommonFields on AtomicAuctionLot {
  id
  chain
  auctionHouse
  lotId
  createdBlockNumber
  createdBlockTimestamp
  createdDate
  createdTransactionHash
  capacityInitial
  start
  conclusion
  auctionType
  seller
  derivativeType
  wrapDerivative
  callbacks
  curator
  curatorApproved
  curatorFee
  protocolFee
  referrerFee
  capacity
  sold
  purchased
  lastUpdatedBlockNumber
  lastUpdatedBlockTimestamp
  lastUpdatedDate
  lastUpdatedTransactionHash
  linearVesting {
    id
    startDate
    expiryDate
    startTimestamp
    expiryTimestamp
  }
  baseToken {
    totalSupply
    address
    decimals
    symbol
    name
  }
  quoteToken {
    address
    decimals
    symbol
    name
  }
  #cancelled
  created {
    infoHash
  }
  curated {
    curator
  }
}

fragment BatchCommonFields on BatchAuctionLot {
  id
  chain
  auctionHouse
  lotId
  createdBlockNumber
  createdBlockTimestamp
  createdDate
  createdTransactionHash
  capacityInitial
  start
  conclusion
  auctionType
  seller
  derivativeType
  wrapDerivative
  callbacks
  curator
  curatorApproved
  curatorFee
  protocolFee
  referrerFee
  capacity
  sold
  purchased
  lastUpdatedBlockNumber
  lastUpdatedBlockTimestamp
  lastUpdatedDate
  lastUpdatedTransactionHash
  linearVesting {
    id
    startDate
    expiryDate
    startTimestamp
    expiryTimestamp
  }
  baseToken {
    totalSupply
    address
    decimals
    symbol
    name
  }
  quoteToken {
    address
    decimals
    symbol
    name
  }
  #cancelled
  created {
    infoHash
  }
  curated {
    curator
  }
}

fragment AtomicAuctionFields on AtomicAuctionLot {
  capacityInQuote
  purchases {
    amount
    buyer
    date
    payout
    transactionHash
    referrer
  }
  fixedPriceSale {
    maxPayout
    price
    id
  }
}

fragment BatchAuctionFields on BatchAuctionLot {
  maxBidId
  bids {
    bidId
    bidder
    blockTimestamp
    date
    amountIn
    rawAmountIn
    rawAmountOut
    rawMarginalPrice
    rawSubmittedPrice
    submittedPrice
    settledAmountIn
    settledAmountInRefunded
    settledAmountOut
    status
    outcome
    referrer
    claimed {
      id
    }
  }
  bidsDecrypted {
    id
  }
  bidsClaimed {
    id
  }
  bidsRefunded {
    id
  }
  encryptedMarginalPrice {
    id
    status
    settlementSuccessful
    minPrice
    minFilled
    minBidSize
    marginalPrice
    hasPartialFill
  }
  fixedPrice {
    id
    status
    settlementSuccessful
    price
    minFilled
    hasPartialFill
    partialBidId
  }
  settled {
    id
  }
}

query getAuctionLots {
  batchAuctionLots(orderBy: createdBlockNumber, orderDirection: asc) {
    ...BatchCommonFields
    ...BatchAuctionFields
  }
  atomicAuctionLots(orderBy: createdBlockNumber, orderDirection: asc) {
    ...AtomicCommonFields
    ...AtomicAuctionFields
  }
}

query getAtomicAuctionLot($id: ID!) {
  atomicAuctionLot(id: $id) {
    ...AtomicCommonFields
    ...AtomicAuctionFields
  }
}

query getBatchAuctionLot($id: ID!) {
  batchAuctionLot(id: $id) {
    ...BatchCommonFields
    ...BatchAuctionFields
  }
}

query getInstalledModules {
  auctionHouseModuleInstalleds {
    keycode
    address
    auctionHouse
  }
}
