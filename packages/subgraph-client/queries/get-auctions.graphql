fragment AuctionLotFragment on AuctionLot {
  auctionRef
  capacity
  capacityInitial
  capacityInQuote
  chain
  conclusion
  createdBlockNumber
  createdBlockTimestamp
  createdTransactionHash
  curator
  curatorApproved
  derivativeRef
  id
  lastUpdatedBlockNumber
  lastUpdatedBlockTimestamp
  lastUpdatedTransactionHash
  lotId
  owner
  purchased
  sold
  start
  wrapDerivative
  baseToken {
    address
    decimals
    symbol
    name
  }
  quoteToken {
    address
    decimals
    name
    symbol
  }
}

query getAuctionLots {
  auctionLots(orderBy: createdBlockNumber, orderDirection: asc) {
    ...AuctionLotFragment
  }
}

query getAuctionLot($lotId: BigInt!) {
  auctionLots(
    orderBy: createdBlockNumber
    orderDirection: asc
    where: { lotId: $lotId }
    first: 1
  ) {
    ...AuctionLotFragment
    created {
      blockNumber
      blockTimestamp
      id
      transactionHash
      infoHash
    }
    cancelled {
      blockNumber
      blockTimestamp
      id
      transactionHash
    }
    bids {
      amount
      bidder
      bidId
      blockNumber
      blockTimestamp
      id
      transactionHash
    }
    refundedBids {
      blockNumber
      blockTimestamp
      id
      transactionHash
      bid {
        bidId
        bidder
        amount
      }
    }
    bidsDecrypted {
      amountIn
      amountOut
      blockNumber
      blockTimestamp
      id
      transactionHash
      bid {
        bidId
        bidder
        amount
      }
    }
    purchases {
      amount
      blockNumber
      blockTimestamp
      buyer
      id
      payout
      referrer
      transactionHash
    }
    settle {
      blockNumber
      blockTimestamp
      id
      transactionHash
    }
    curated {
      blockNumber
      blockTimestamp
      curator
      id
      transactionHash
    }
  }
}
